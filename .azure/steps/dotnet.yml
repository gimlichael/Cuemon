steps:
  - task: UseDotNet@2
    displayName: 'Install .NET SDK 6.0.x'
    inputs:
      version: 6.0.x
      installationPath: $(Agent.ToolsDirectory)/dotnet

  - task: UseDotNet@2
    displayName: 'Install .NET SDK 7.0.x'
    inputs:
      version: 7.0.x
      installationPath: $(Agent.ToolsDirectory)/dotnet

  - script: |
      powershell -NoProfile -ExecutionPolicy unrestricted -Command "[Net.ServicePointManager]::SecurityProtocol = [Net.SecurityProtocolType]::Tls12; &([scriptblock]::Create((Invoke-WebRequest -UseBasicParsing 'https://dot.net/v1/dotnet-install.ps1'))) -Version 8.0.100-rtm.23478.7 -InstallDir $(Agent.ToolsDirectory)/dotnet
      dotnet --info
    displayName: 'Install .NET SDK 8 Preview'
    condition: eq(variables['Agent.OS'], 'Windows_NT')

  - script: |
      curl -sSL https://dot.net/v1/dotnet-install.sh | bash /dev/stdin --version 8.0.100-rtm.23478.7 --install-dir $(Agent.ToolsDirectory)/dotnet
      dotnet --info
    displayName: 'Install .NET SDK 8 Preview'
    condition: eq(variables['Agent.OS'], 'Linux')