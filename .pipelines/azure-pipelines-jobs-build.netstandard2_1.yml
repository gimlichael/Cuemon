steps:
  - template: azure-pipelines-jobs-build-step.dotnet.yml

  - template: azure-pipelines-jobs-build-step.minvertool.yml

  - template: azure-pipelines-jobs-build-step.snk.yml

  - template: azure-pipelines-jobs-build-step.minverversionoverride.yml

  - template: azure-pipelines-jobs-build-step.restore.yml

  - task: DotNetCoreCLI@2
    displayName: 'Build netstandard2.1 compatible Assemblies'
    inputs:
      command: build
      projects: |
        src/**/Cuemon.Extensions.IO.csproj
        src/**/Cuemon.IO.csproj
      arguments: '--configuration $(BuildConfiguration) --verbosity quiet --no-restore --framework netstandard2.1'
      workingDirectory: '$(BuildSource)'

  - task: PublishPipelineArtifact@1
    inputs:
      targetPath: '$(BuildSource)'
      artifactName: 'netstandard2.1'