steps:
  - task: DownloadBuildArtifacts@2
    inputs:
      downloadPath: '$(System.DefaultWorkingDirectory)'

  - task: ExtractFiles@1
    inputs:
      archiveFilePatterns: '**/*.zip' 

  - task: DotNetCoreCLI@2
    condition: succeeded()
    displayName: dotnet pack
    inputs:
      command: pack
      packagesToPack: src/**/*.csproj
      nobuild: true

  - task: PublishBuildArtifacts@1
    condition: succeeded()
    displayName: 'Store NuGet Packages - $(ArtifactPackageName)'
    inputs:
      pathtoPublish: $(Build.ArtifactStagingDirectory)
      artifactName: $(ArtifactPackageName)
      publishLocation: 'Container'